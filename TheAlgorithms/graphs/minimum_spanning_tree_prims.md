# 프림 알고리즘 (Prim's Algorithm)

이 문서는 `minimum_spanning_tree_prims.py` 파일에 구현된 **프림 알고리즘**에 대해 설명합니다.

## 개요

프림 알고리즘은 가중치가 있는 연결된 무향 그래프에서 **최소 신장 트리(MST, Minimum Spanning Tree)**를 찾는 그리디 알고리즘입니다. 임의의 시작 정점에서 출발하여, 현재 트리에 연결된 간선 중 가장 가중치가 작은 간선을 선택하여 트리를 확장해 나가는 방식입니다.

이 구현에서는 최소 힙(Min-Heap)을 직접 구현하여 효율적으로 최소 가중치 간선을 선택합니다.

## 주요 함수: `PrimsAlgorithm`

### `PrimsAlgorithm(l)`

- **목적**: 주어진 그래프의 최소 신장 트리를 구성하는 간선들의 리스트를 반환합니다.
- **매개변수**:
  - `l`: 인접 리스트 형태의 그래프. `defaultdict(list)`를 사용하며, `l[u]`는 `[v, weight]` 리스트들의 리스트입니다.
- **반환값**: MST에 포함된 간선들의 리스트 `[(u, v), ...]`.

### 내부 헬퍼 함수 (힙 관리)

이 알고리즘은 우선순위 큐(최소 힙)를 사용하여 방문하지 않은 정점들 중 트리와 가장 가까운 정점을 효율적으로 찾습니다.

- **`top_to_bottom(heap, start, size, positions)`**: 힙의 특정 노드를 아래로 내려보내며 힙 속성을 유지합니다 (Heapify Down).
- **`bottom_to_top(val, index, heap, position)`**: 힙의 특정 노드 값이 줄어들었을 때 위로 올려보내며 힙 속성을 유지합니다 (Decrease Key).
- **`heapify(heap, positions)`**: 초기 리스트를 힙 구조로 변환합니다.
- **`deleteMinimum(heap, positions)`**: 힙에서 최솟값(루트)을 제거하고 반환합니다.
- **`get_position` / `set_position`**: 정점이 힙 배열의 어느 인덱스에 위치하는지 추적하는 `nodePosition` 리스트를 관리합니다. 이를 통해 힙 내의 임의의 정점에 빠르게 접근하여 값을 갱신할 수 있습니다.

### 알고리즘 동작 원리

1. **초기화**:
   - `visited`: 방문 여부 배열.
   - `Distance_TV`: 각 정점이 현재 트리와 연결될 수 있는 최소 가중치를 저장하는 힙. 초기값은 무한대(`sys.maxsize`).
   - `Positions`: 힙의 각 인덱스에 어떤 정점이 있는지 저장.
   - `nodePosition`: 각 정점이 힙의 어느 인덱스에 있는지 저장 (역참조).
   - `Nbr_TV`: 각 정점이 트리와 연결될 때의 부모(이웃) 정점을 저장.

2. **시작 정점 처리 (0번 정점)**:
   - 0번 정점을 방문 처리합니다.
   - 0번 정점의 이웃들의 거리(`Distance_TV`)를 갱신하고 `heapify`를 수행합니다.

3. **트리 확장 루프**:
   - 모든 정점을 방문할 때까지 반복합니다.
   - `deleteMinimum`을 통해 트리와 가장 가까운 미방문 정점 `vertex`를 선택합니다.
   - 선택된 정점과 연결된 간선 `(Nbr_TV[vertex], vertex)`를 결과 리스트(`TreeEdges`)에 추가합니다.
   - `vertex`를 방문 처리합니다.
   - `vertex`의 이웃 정점들을 확인합니다:
     - 아직 방문하지 않았고, `vertex`를 통해 연결하는 비용이 기존 비용보다 작다면:
       - `Distance_TV`를 갱신하고 `bottom_to_top`을 호출하여 힙을 재정렬합니다.
       - `Nbr_TV`를 갱신합니다.

## 사용법

`if __name__ == "__main__":` 블록을 통해 사용자 입력을 받아 실행할 수 있습니다.

```python
# 실행 시 정점 수, 간선 수, 그리고 각 간선 정보(u v w)를 입력받습니다.
# 결과로 MST를 구성하는 간선 리스트가 출력됩니다.
```
