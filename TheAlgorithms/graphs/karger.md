# 카거 알고리즘 (Karger's Algorithm)

이 문서는 `karger.py` 파일에 구현된 **카거 알고리즘(Karger's Algorithm)**에 대해 설명합니다.

## 개요

카거 알고리즘은 연결된 무향 그래프의 **최소 컷(Minimum Cut)**을 찾기 위한 확률적 알고리즘(Randomized Algorithm)입니다. 최소 컷이란 그래프를 두 개의 부분으로 나누기 위해 제거해야 하는 최소한의 간선 집합을 의미합니다.

이 알고리즘은 간선을 무작위로 선택하여 두 정점을 하나로 합치는(축소, Contraction) 과정을 반복합니다. 확률적이기 때문에 항상 최적해(최소 컷)를 보장하지는 않지만, 여러 번 반복 실행하여 최적해를 찾을 확률을 높일 수 있습니다.

## 주요 함수: `partition_graph`

### `partition_graph(graph: dict[str, list[str]]) -> set[tuple[str, str]]`

- **목적**: 카거 알고리즘을 사용하여 그래프를 두 개의 그룹으로 분할하고, 그 사이를 연결하는 간선들의 집합(Cutset)을 반환합니다.
- **매개변수**:
  - `graph`: 인접 리스트 형태의 딕셔너리. 키는 정점(문자열), 값은 이웃 정점들의 리스트입니다.
- **반환값**: 두 그룹 사이의 간선들을 담은 집합(`set`). 각 간선은 `(u, v)` 튜플 형태입니다.

### 알고리즘 동작 원리

1. **초기화**:
   - `contracted_nodes`: 각 정점이 어떤 원래 정점들을 포함하고 있는지 추적하는 딕셔너리입니다. 초기에는 자기 자신만 포함합니다.
   - `graph_copy`: 원본 그래프를 손상시키지 않기 위해 복사본을 생성하여 작업합니다.

2. **축소 루프 (While len > 2)**:
   - 그래프에 정점이 2개 남을 때까지 다음 과정을 반복합니다.
   - **무작위 간선 선택**: 현재 그래프에서 임의의 간선 `(u, v)`를 선택합니다.
   - **정점 병합 (Contraction)**:
     - 두 정점 `u`와 `v`를 합쳐 새로운 정점 `uv`를 만듭니다. (이름은 문자열 연결)
     - `u`와 `v`의 모든 이웃을 `uv`의 이웃으로 만듭니다.
     - `u`와 `v`를 가리키던 다른 정점들의 간선 정보를 `uv`로 업데이트합니다.
     - `u`와 `v` 사이의 간선(Self-loop가 됨)을 제거합니다.
   - **정보 갱신**: `contracted_nodes`를 업데이트하여 `uv`가 `u`와 `v`가 포함하던 모든 원래 정점들을 포함하도록 합니다.
   - **정점 삭제**: 기존 정점 `u`와 `v`를 그래프에서 제거합니다.

3. **컷셋 계산**:
   - 루프가 끝나면 그래프에는 두 개의 슈퍼 노드(Super-node)만 남습니다.
   - 각 슈퍼 노드에 속한 원래 정점들의 그룹을 확인합니다.
   - 원본 그래프(`graph`)를 참조하여, 한 그룹의 정점과 다른 그룹의 정점을 연결하는 모든 간선을 찾아 반환합니다.

## 사용법

`if __name__ == "__main__":` 블록에서 위키백과 예제 그래프(`TEST_GRAPH`)를 사용하여 알고리즘을 실행하는 것을 확인할 수 있습니다.

```python
# 실행 예시
# 결과는 확률적이므로 실행할 때마다 다를 수 있습니다.
# 예: {('1', '2'), ('3', '1'), ...}
print(partition_graph(TEST_GRAPH))
```

## 주의 사항
- 이 구현은 문자열 연결(`u + v`)을 통해 새로운 정점 이름을 생성하므로, 정점 이름이 길어질 수 있습니다.
- 무작위 알고리즘의 특성상, 정확한 최소 컷을 얻기 위해서는 알고리즘을 여러 번 실행하여 가장 작은 크기의 컷셋을 선택해야 합니다.