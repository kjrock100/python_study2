# 프림 알고리즘 (Prim's Algorithm)

이 문서는 `prim.py` 파일에 구현된 **프림 알고리즘**에 대해 설명합니다.

## 개요

프림 알고리즘은 가중치가 있는 연결된 무향 그래프에서 **최소 신장 트리(MST, Minimum Spanning Tree)**를 찾는 그리디 알고리즘입니다. 임의의 시작 정점에서 출발하여, 현재 트리에 연결된 간선 중 가장 가중치가 작은 간선을 선택하여 트리를 확장해 나가는 방식입니다.

## 주요 클래스: `Vertex`

그래프의 정점(Vertex)을 표현하는 클래스입니다.

- **속성**:
  - `id`: 정점 식별자.
  - `key`: 현재 트리와 연결되는 최소 가중치 (초기값: 무한대).
  - `pi`: 트리 상에서의 부모 정점.
  - `neighbors`: 인접한 정점들의 리스트.
  - `edges`: 인접 정점과의 간선 가중치를 저장하는 딕셔너리 (`{vertex_id: weight}`).
- **메서드**:
  - `__lt__`: `key` 값을 기준으로 정점 간의 대소 비교를 수행합니다 (우선순위 큐에서 사용).
  - `add_neighbor`, `add_edge`: 그래프 구성을 위한 메서드입니다.

## 주요 함수

### `prim(graph: list, root: Vertex) -> list`

- **목적**: 기본적인 리스트 연산을 사용하여 프림 알고리즘을 수행합니다.
- **동작**:
  1. 모든 정점의 `key`를 무한대로, `pi`를 `None`으로 초기화합니다. 시작 정점(`root`)의 `key`는 0입니다.
  2. 모든 정점을 리스트 `q`에 넣습니다.
  3. `q`가 빌 때까지 반복합니다:
     - `q`에서 `key`가 가장 작은 정점 `u`를 찾아서 제거합니다 (`min(q)` 사용).
     - `u`의 이웃 `v`에 대해, `v`가 `q`에 있고 간선 `(u, v)`의 가중치가 `v.key`보다 작으면 `v.key`와 `v.pi`를 갱신합니다.
  4. MST를 구성하는 간선들의 리스트를 반환합니다.
- **시간 복잡도**: $O(V^2)$ (코드 주석에는 $O(mn)$으로 표기됨). 최소값을 찾기 위해 리스트를 순회하므로 정점 수가 많을 때 비효율적일 수 있습니다.

### `prim_heap(graph: list, root: Vertex) -> Iterator[tuple]`

- **목적**: 최소 힙(Min-Heap)을 사용하여 성능을 개선한 프림 알고리즘입니다.
- **동작**:
  - `heapq` 모듈을 사용하여 정점들을 관리합니다.
  - 가장 작은 `key`를 가진 정점을 효율적으로 추출(`heappop`)합니다.
  - **주의**: Python의 `heapq`는 `decrease-key` 연산을 직접 지원하지 않으므로, 키 값이 갱신될 때마다 `heapify`를 호출하여 힙 속성을 유지합니다.
- **반환값**: MST 간선들을 하나씩 반환하는 이터레이터(Iterator)입니다.

## 헬퍼 함수: `connect`

- `connect(graph, a, b, edge)`: 그래프 리스트 `graph`의 `a-1`번 인덱스와 `b-1`번 인덱스 정점 사이에 가중치 `edge`인 무향 간선을 추가합니다. (입력 `a`, `b`는 1부터 시작하는 인덱스를 가정)

## 사용법

`test_vector` 함수나 `doctest`를 통해 실행 예시를 확인할 수 있습니다.

```python
# 정점 생성 (5개)
x = 5
G = [Vertex(n) for n in range(x)]

# 간선 연결 (1-based index 사용)
connect(G, 1, 2, 15)
connect(G, 1, 3, 12)
connect(G, 2, 4, 13)
connect(G, 2, 5, 5)
connect(G, 3, 2, 6)
connect(G, 3, 4, 6)

# 알고리즘 실행 (시작점: G[0])
MST = prim(G, G[0])
for edge in MST:
    print(edge)
# 결과 예시: (2, 3), (3, 1), (4, 3), (5, 2)
```
