# 크루스칼 알고리즘 2 (Kruskal's Algorithm 2)

이 문서는 `minimum_spanning_tree_kruskal2.py` 파일에 구현된 **크루스칼 알고리즘**에 대해 설명합니다. 이 구현은 **서로소 집합(Disjoint Set)** 자료구조를 클래스로 체계적으로 구현하여 사용하며, **경로 압축(Path Compression)**과 **랭크 기반 합치기(Union by Rank)** 최적화 기법을 적용했습니다.

## 개요

크루스칼 알고리즘은 가중치가 있는 무향 그래프에서 **최소 신장 트리(MST)**를 찾는 그리디 알고리즘입니다. 간선들을 가중치 순으로 정렬한 뒤, 사이클을 만들지 않는 간선을 선택하여 트리를 확장해 나갑니다.

## 주요 클래스

### `DisjointSetTreeNode`
- **목적**: 서로소 집합의 각 노드를 표현합니다.
- **속성**:
  - `data`: 노드가 저장하는 데이터.
  - `parent`: 부모 노드에 대한 참조 (초기에는 자기 자신).
  - `rank`: 트리의 높이(랭크)를 나타내는 값 (Union by Rank에 사용).

### `DisjointSetTree`
- **목적**: 서로소 집합 자료구조를 관리합니다.
- **주요 메서드**:
  - `make_set(data)`: 새로운 원소를 포함하는 집합을 생성합니다.
  - `find_set(data)`: 주어진 원소가 속한 집합의 대표(루트)를 찾습니다. 재귀적으로 부모를 찾아가며 **경로 압축**을 수행하여 이후 탐색 속도를 높입니다.
  - `union(data1, data2)`: 두 원소가 속한 집합을 하나로 합칩니다.
  - `link(node1, node2)`: 두 집합의 루트를 연결합니다. **랭크(Rank)**가 더 높은 트리에 낮은 트리를 붙여 트리의 높이가 커지는 것을 방지합니다.

### `GraphUndirectedWeighted`
- **목적**: 가중치가 있는 무향 그래프를 표현하고 MST를 계산합니다.
- **속성**:
  - `connections`: 인접 리스트 형태의 딕셔너리. `node1 -> {node2: weight, ...}` 구조입니다.
- **주요 메서드**:
  - `add_edge(node1, node2, weight)`: 두 노드 사이에 가중치가 있는 간선을 추가합니다.
  - `kruskal()`: 크루스칼 알고리즘을 실행하여 MST를 구성하는 새로운 `GraphUndirectedWeighted` 객체를 반환합니다.

## 알고리즘 동작 원리 (`kruskal` 메서드)

1. **간선 수집 및 정렬**: 그래프의 모든 간선을 수집하고 가중치를 기준으로 오름차순 정렬합니다.
2. **집합 초기화**: 그래프의 모든 노드에 대해 `make_set`을 호출하여 각각을 독립된 집합으로 만듭니다.
3. **간선 선택 루프**:
   - 정렬된 간선 `(u, v, w)`를 순서대로 확인합니다.
   - `find_set(u)`와 `find_set(v)`를 통해 두 노드의 루트를 찾습니다.
   - 두 루트가 다르다면(즉, 사이클이 형성되지 않는다면):
     - MST 그래프에 해당 간선을 추가합니다.
     - `union(u, v)`를 호출하여 두 집합을 합칩니다.
   - 선택된 간선의 수가 `전체 노드 수 - 1`개가 되면 종료합니다.

## 사용법

`kruskal` 메서드의 독스트링(Docstring)에 포함된 예제를 통해 동작을 확인할 수 있습니다.

```python
# 정수형 노드를 가진 그래프 예시
g1 = GraphUndirectedWeighted[int]()
g1.add_edge(1, 2, 1)
g1.add_edge(2, 3, 2)
g1.add_edge(3, 4, 1)
g1.add_edge(3, 5, 100) # 가중치가 커서 MST에서 제외될 간선
g1.add_edge(4, 5, 5)

mst = g1.kruskal()
# 결과: MST에 포함된 간선들로 구성된 새로운 그래프 객체 반환
```

## 특징
- **제네릭(Generic) 지원**: 노드 데이터 타입으로 정수, 문자열 등 다양한 타입을 사용할 수 있습니다.
- **최적화된 자료구조**: 경로 압축과 랭크 기반 합치기를 사용하여 Union-Find 연산의 효율성을 극대화했습니다.
