# SHA-256 해시 알고리즘 (SHA-256 Hash Algorithm)

이 문서는 `sha256.py` 파일에 구현된 **SHA-256 (Secure Hash Algorithm 256)** 에 대해 설명합니다.

## 개요

SHA-256은 SHA-2 (Secure Hash Algorithm 2) 계열의 암호화 해시 함수 중 하나로, 임의의 길이의 입력을 받아 256비트(32바이트)의 고정된 길이의 해시값을 출력합니다. 일반적으로 64자리의 16진수 문자열로 표현됩니다. SHA-1보다 보안성이 뛰어나며, 현재 가장 널리 사용되는 해시 알고리즘 중 하나입니다.

## 주요 클래스: `SHA256`

### `__init__(self, data: bytes)`
- **목적**: 클래스를 초기화하고 해시 계산을 시작합니다.
- **매개변수**: `data` (해시할 입력 데이터, 바이트 문자열).
- **속성**:
  - `self.hashes`: 8개의 32비트 정수로 구성된 초기 해시값 (상수). 소수(Prime numbers)의 제곱근의 소수점 아래 부분을 사용하여 생성됩니다.
  - `self.round_constants`: 64개의 라운드 상수. 소수의 세제곱근의 소수점 아래 부분을 사용하여 생성됩니다.

### `preprocessing(data: bytes) -> bytes` (Static Method)
- **목적**: 입력 메시지를 512비트(64바이트)의 배수가 되도록 패딩(Padding)합니다.
- **동작**:
  1. 메시지 끝에 `1` 비트(바이트로는 `0x80`)를 추가합니다.
  2. 메시지 길이가 512비트의 배수보다 64비트 모자랄 때까지 `0`으로 채웁니다.
  3. 마지막 64비트에 원본 메시지의 비트 길이를 빅 엔디안(Big-endian) 정수로 추가합니다.

### `final_hash(self) -> None`
- **목적**: 전체 해시 계산 과정을 수행하고 최종 해시값을 생성합니다.
- **알고리즘 동작**:
  1. 전처리된 데이터를 64바이트(512비트) 단위의 블록으로 나눕니다.
  2. 각 블록에 대해 다음을 반복합니다:
     - **메시지 스케줄 확장**: 16개의 32비트 워드를 64개로 확장합니다.
     - **압축 루프**: 64회의 라운드를 수행하며 비트 연산(회전, 시프트, XOR, 논리 연산)을 통해 해시 상태(`a`~`h`)를 갱신합니다.
     - **해시값 갱신**: 라운드 종료 후, 현재 블록의 결과를 누적 해시값(`self.hashes`)에 더합니다.
  3. 최종 해시값들을 16진수 문자열로 변환하여 이어 붙여 `self.hash`에 저장합니다.

### `ror(self, value: int, rotations: int) -> int`
- **목적**: 비트 오른쪽 순환 시프트(Right Rotate) 연산을 수행합니다.
- **동작**: 32비트 정수 `value`를 `rotations`만큼 오른쪽으로 회전시킵니다.

## 사용법

`if __name__ == "__main__":` 블록을 통해 커맨드 라인에서 직접 실행하거나 테스트를 수행할 수 있습니다.

```bash
# 문자열 해시 계산
python sha256.py --string "Hello World!!"

# 파일 해시 계산
python sha256.py --file "filename.txt"
```

인자 없이 실행하면 기본 문자열("Hello World!! Welcome to Cryptography")에 대한 해시를 출력합니다.

## 테스트
- `SHA256HashTest` 클래스는 Python의 내장 `hashlib` 라이브러리의 결과와 이 구현의 결과를 비교하여 정확성을 검증합니다.
