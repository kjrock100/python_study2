# 에니그마 머신 (Enigma Machine)

이 문서는 `enigma_machine.py` 파일에 구현된 **에니그마 머신** 시뮬레이션 코드에 대해 설명합니다.

## 개요

에니그마 머신은 2차 세계 대전 당시 독일군이 사용했던 암호화 기계입니다. 이 코드는 에니그마의 회전판(Rotor)과 반사판(Reflector) 구조를 단순화하여 파이썬으로 구현한 것입니다.

## 주요 구성 요소

### 전역 변수
- `alphabets`: 암호화에 사용할 문자들의 리스트 (ASCII 32 ~ 125).
- `gear_one`, `gear_two`, `gear_three`: 3개의 회전판(로터). 초기에는 0부터 순서대로 정렬된 인덱스를 가집니다.
- `reflector`: 반사판. 신호를 되돌려 보내는 역할을 하며, 역순으로 초기화되어 있습니다.
- `code`: 암호화된 결과 문자를 저장하는 리스트.

### `rotator()` 함수
- **목적**: 회전판을 회전시켜 암호화 패턴을 매번 바꿉니다.
- **동작**:
  - `gear_one`은 함수가 호출될 때마다 한 칸씩 회전합니다.
  - `gear_one`이 한 바퀴를 다 돌면 `gear_two`가 한 칸 회전합니다.
  - `gear_two`가 한 바퀴를 다 돌면 `gear_three`가 한 칸 회전합니다.
  - 회전은 리스트의 첫 번째 요소를 맨 뒤로 보내는 방식(Left Rotate)으로 구현되었습니다.

### `engine(input_character)` 함수
- **목적**: 입력된 문자 하나를 암호화합니다.
- **동작**:
  1. 입력 문자의 인덱스를 찾습니다.
  2. **정방향 통과**: `gear_one` -> `gear_two` -> `gear_three` 순서로 값을 매핑(치환)합니다.
  3. **반사판 통과**: `reflector`를 통해 값을 변환합니다.
  4. **역방향 통과**: `gear_three` -> `gear_two` -> `gear_one` 순서로 역매핑(`index` 찾기)을 수행합니다.
  5. 최종 인덱스에 해당하는 문자를 `code` 리스트에 추가합니다.
  6. 암호화가 끝난 후 `rotator()`를 호출하여 회전판을 돌립니다.

## 사용법

`if __name__ == "__main__":` 블록에서 실행 예시를 확인할 수 있습니다.

1. **메시지 입력**: 암호화할 메시지를 입력합니다.
2. **토큰 설정**: 초기 회전 상태를 결정하는 정수형 토큰(Token)을 입력합니다. 이 토큰은 암호화 키와 같은 역할을 하며, 복호화할 때도 동일한 값을 입력해야 합니다.
3. **실행 과정**:
   - 입력받은 토큰만큼 `rotator()`를 미리 실행하여 초기 상태를 설정합니다.
   - 메시지의 각 문자에 대해 `engine()`을 실행하여 암호화합니다.
4. **결과 출력**: 변환된 메시지와 사용된 토큰을 출력합니다.

**참고**: 에니그마 머신의 대칭적 구조로 인해, 동일한 토큰을 설정하고 암호화된 메시지를 입력하면 원본 메시지가 복호화되어 나옵니다.
