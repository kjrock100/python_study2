# 버크 알고리즘 (Burke's Algorithm)

이 문서는 `burkes.py` 파일에 구현된 **버크 알고리즘(Burke's Algorithm)**에 대해 설명합니다. 이 알고리즘은 그레이스케일 이미지를 이진(흑백) 이미지로 변환하면서 연속적인 톤의 착시를 유지하는 디더링(Dithering) 기법 중 하나입니다.

## 개요

버크 알고리즘은 **오차 확산(Error Diffusion)** 알고리즘입니다. 각 픽셀을 처리하여 검은색 또는 흰색으로 결정할 때, "양자화 오차"(원래의 회색 값과 실제 출력된 흑/백 값의 차이)를 계산합니다. 이 오차는 아직 처리되지 않은 인접 픽셀들에 분배되어, 이후의 양자화 결정에 영향을 미칩니다.

## 클래스: `Burkes`

이미지 처리를 담당하는 메인 클래스입니다.

### `__init__(self, input_img, threshold: int)`
- **목적**: 디더링 인스턴스를 초기화합니다.
- **매개변수**:
  - `input_img`: NumPy 배열 형태의 원본 이미지입니다.
  - `threshold`: 픽셀을 검은색 또는 흰색으로 결정하는 기준이 되는 정수 값(0-255)입니다.
- **주요 동작**:
  - 임계값(threshold)이 유효한 범위 내에 있는지 확인합니다.
  - 누적된 오차를 저장할 `error_table`을 초기화합니다.
  - 결과 이미지를 저장할 `output_img` 배열을 생성합니다.

### `get_greyscale(cls, blue: int, green: int, red: int) -> float`
- **목적**: RGB 색상 값을 단일 그레이스케일 명도 값으로 변환합니다.
- **공식**: 표준 광도 공식인 $0.114 \cdot B + 0.587 \cdot G + 0.2126 \cdot R$을 사용합니다.

### `process(self) -> None`
- **목적**: 디더링 로직을 실행합니다.
- **단계**:
  1. 이미지를 픽셀 단위로 순회합니다.
  2. 현재 픽셀의 그레이스케일 값을 계산하고 이전 픽셀들로부터 전파된 오차를 더합니다.
  3. **임계값 처리(Thresholding)**:
     - 값이 `threshold`보다 작으면 픽셀은 **검은색** (0, 0, 0)이 됩니다.
     - 그렇지 않으면 **흰색** (255, 255, 255)이 됩니다.
  4. **오차 계산**: 계산된 회색 값과 실제 출력 값(0 또는 255) 간의 차이를 계산합니다.
  5. **오차 확산**: 버크 행렬(Burke's matrix)에 따라 이 오차를 인접 픽셀들에 분배합니다.

### 버크 확산 행렬 (Burke's Diffusion Matrix)

현재 픽셀(`*`)에서 발생한 오차는 다음과 같은 가중치(32로 나눔)로 이웃 픽셀에 분배됩니다:

| | | * | 8 | 4 |
|---|---|---|---|---|
| 2 | 4 | 8 | 4 | 2 |

- **우측 1칸**: 8/32
- **우측 2칸**: 4/32
- **다음 행, 좌측 2칸**: 2/32
- **다음 행, 좌측 1칸**: 4/32
- **다음 행, 중앙**: 8/32
- **다음 행, 우측 1칸**: 4/32
- **다음 행, 우측 2칸**: 2/32

## 사용법

`if __name__ == "__main__":` 블록은 사용 예시를 보여줍니다:
1. 이미지(`image_data/lena.jpg`)를 불러옵니다.
2. 다양한 임계값(예: 1, 126, 130, 140)으로 `Burkes` 인스턴스를 생성합니다.
3. 각 인스턴스에 대해 `.process()`를 호출하여 처리를 수행합니다.
4. OpenCV를 사용하여 결과 디더링 이미지를 화면에 표시합니다.