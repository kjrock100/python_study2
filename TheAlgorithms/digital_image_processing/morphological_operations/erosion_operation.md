# 침식 연산 (Erosion Operation)

이 문서는 `erosion_operation.py` 파일에 구현된 **침식(Erosion)** 연산 알고리즘에 대해 설명합니다. 침식 연산은 형태학적(Morphological) 이미지 처리 기법 중 하나로, 이미지 내의 객체(흰색 영역)를 축소하거나 가늘게 만드는 데 사용됩니다.

## 개요

침식 연산은 구조 요소(Structuring Element) 또는 커널(Kernel)이 이미지의 객체 내부에 완전히 포함되는지 확인합니다. 커널의 모든 1인 지점이 이미지의 1인 지점과 겹칠 때만 해당 픽셀을 1(흰색)로 유지하고, 하나라도 겹치지 않으면 0(검은색)으로 깎아냅니다. 이로 인해 객체의 크기가 줄어들고 잡음(Noise)이 제거되는 효과가 있습니다.

## 주요 함수 설명

### `rgb2gray(rgb: np.array) -> np.array`
- **목적**: RGB 컬러 이미지를 그레이스케일 이미지로 변환합니다.
- **공식**: $0.2989 \cdot R + 0.5870 \cdot G + 0.1140 \cdot B$ 공식을 사용하여 각 채널의 가중 평균을 구합니다.

### `gray2binary(gray: np.array) -> np.array`
- **목적**: 그레이스케일 이미지를 이진(Binary) 이미지로 변환합니다.
- **동작**: 픽셀 값이 127보다 크면 `True`(흰색), 그렇지 않으면 `False`(검은색)로 변환합니다.

### `erosion(image: np.array, kernel: np.array) -> np.array`
- **목적**: 입력된 이진 이미지에 침식 연산을 수행합니다.
- **매개변수**:
  - `image`: 이진 이미지 (NumPy 배열).
  - `kernel`: 구조 요소 (Structuring Element).
- **알고리즘 단계**:
  1. **패딩(Padding)**: 커널 크기를 고려하여 이미지 가장자리에 여백을 추가한 `image_padded`를 생성합니다.
  2. **순회 및 연산**:
     - 원본 이미지의 모든 픽셀 위치를 순회합니다.
     - 현재 위치에 커널을 겹쳐놓고, 커널과 이미지 영역의 곱의 합(`summation`)을 계산합니다.
     - **조건 검사**: 계산된 합이 **5**인지 확인합니다.
       - 여기서 `5`는 예제에서 사용하는 십자가 모양 커널의 1의 개수입니다.
       - 즉, 커널의 모든 활성 픽셀이 이미지의 흰색 픽셀과 일치하는지 확인하는 과정입니다.
     - 조건이 참이면 결과 픽셀을 1로, 그렇지 않으면 0으로 설정합니다.

### `structuring_element`
- 예제에서 사용하는 3x3 크기의 십자가 모양 커널입니다. 1의 개수가 총 5개입니다.
  ```python
  [[0, 1, 0],
   [1, 1, 1],
   [0, 1, 0]]
  ```

## 사용법

`if __name__ == "__main__":` 블록에서 사용 예시를 확인할 수 있습니다:

1. `..\image_data\lena.jpg` 이미지를 불러옵니다.
2. `rgb2gray`와 `gray2binary`를 사용하여 이미지를 이진화합니다.
3. `erosion` 함수를 호출하여 침식 연산을 수행합니다.
4. 결과 이미지를 `result_erosion.png` 파일로 저장합니다.