# 가보 필터 (Gabor Filter)

이 문서는 `gabor_filter.py` 파일에 구현된 **가보 필터(Gabor Filter)** 알고리즘에 대해 설명합니다. 가보 필터는 인간의 시각 시스템과 유사한 특성을 가져 텍스처 분석, 엣지 검출, 특징 추출 등 다양한 이미지 처리 분야에서 사용되는 선형 필터입니다.

## 개요

가보 필터는 본질적으로 **가우시안 커널(Gaussian Kernel)**에 **정현파(Sinusoidal wave)**를 곱한 형태입니다. 이를 통해 특정 방향(`theta`)과 주파수(`lambd`)를 가진 성분을 이미지에서 추출할 수 있습니다.

## 주요 함수: `gabor_filter_kernel`

이 함수는 주어진 파라미터에 따라 가보 필터 커널(행렬)을 생성하여 반환합니다.

### 매개변수 (Parameters)

- `ksize`: 필터 커널의 크기 (정사각형, 홀수).
- `sigma`: 가우시안 분포의 표준편차. 필터가 수용하는 영역의 크기를 결정합니다.
- `theta`: 가보 함수의 평행한 줄무늬 방향(법선 각도). 엣지 검출 시 검출하려는 방향을 결정합니다.
- `lambd`: 정현파 성분의 파장.
- `gamma`: 공간적 종횡비(aspect ratio). 가보 함수의 타원율을 지정합니다.
- `psi`: 정현파 함수의 위상 오프셋.

### 알고리즘 동작 원리

1. **커널 크기 조정**: `ksize`가 짝수라면 1을 더해 홀수로 만듭니다.
2. **좌표 회전**: 각 픽셀 위치 `(x, y)`에 대해 중심으로부터의 거리를 구하고, `theta`만큼 회전변환을 수행하여 `_x`, `_y` 좌표를 얻습니다.
   - $_x = x \cos\theta + y \sin\theta$
   - $_y = -x \sin\theta + y \cos\theta$
3. **가보 수식 적용**: 회전된 좌표를 사용하여 가보 함수 값을 계산합니다.
   - $G(x, y) = \exp\left(-\frac{\_x^2 + \gamma^2 \_y^2}{2\sigma^2}\right) \cdot \cos\left(2\pi \frac{\_x}{\lambda} + \psi\right)$

## 사용법

`if __name__ == "__main__":` 블록에서 사용 예시를 확인할 수 있습니다:

1. `image_data/lena.jpg` 이미지를 불러와 그레이스케일로 변환합니다.
2. **다중 방향 필터링**: 0도부터 150도까지 30도 간격으로 `theta`를 변경하며 가보 필터를 생성합니다.
   - 설정값: `ksize=10`, `sigma=8`, `lambd=10`, `gamma=0`, `psi=0`
3. `cv2.filter2D` 함수를 사용하여 각 방향의 필터를 이미지에 적용하고, 결과를 누적(`out += ...`)합니다.
4. 결과 이미지를 0~255 범위로 정규화하여 화면에 표시합니다.

이 예제는 여러 방향의 엣지를 종합적으로 검출하는 효과를 보여줍니다.