# 미디언 필터 (Median Filter)

이 문서는 `median_filter.py` 파일에 구현된 **미디언 필터(Median Filter)** 알고리즘에 대해 설명합니다. 미디언 필터는 비선형 디지털 필터링 기술로, 이미지의 노이즈(특히 소금-후추 노이즈, Salt-and-pepper noise)를 제거하는 데 매우 효과적입니다.

## 개요

미디언 필터는 주변 픽셀 값들을 정렬한 후 그 **중앙값(Median)**을 선택하여 현재 픽셀의 값을 대체하는 방식으로 동작합니다. 평균값 필터(Mean Filter)와 달리 엣지(Edge)를 흐리게 만들지 않으면서 노이즈를 제거할 수 있다는 장점이 있습니다.

## 주요 함수: `median_filter`

### `median_filter(gray_img, mask=3)`
- **목적**: 그레이스케일 이미지에 미디언 필터를 적용합니다.
- **매개변수**:
  - `gray_img`: 입력 그레이스케일 이미지 (NumPy 배열).
  - `mask`: 커널(마스크)의 크기. 홀수여야 합니다 (예: 3, 5).
- **반환값**: 필터링된 이미지.

### 알고리즘 동작 원리

1. **초기화**:
   - 마스크 크기에 따른 경계(`bd`)를 계산합니다 (`mask / 2`).
   - 입력 이미지와 동일한 크기의 결과 이미지 배열(`median_img`)을 생성합니다.

2. **픽셀 순회**:
   - 이미지의 경계를 제외한 모든 픽셀을 순회합니다.

3. **커널 추출 및 정렬**:
   - 현재 픽셀을 중심으로 `mask x mask` 크기의 영역(커널)을 추출합니다.
   - 추출된 2차원 배열을 1차원으로 평탄화(`ravel`)합니다.
   - 픽셀 값들을 오름차순으로 정렬(`sort`)합니다.

4. **중앙값 선택**:
   - 정렬된 배열에서 중앙에 위치한 값을 선택하여 결과 이미지의 해당 픽셀 값으로 설정합니다.

## 사용법

`if __name__ == "__main__":` 블록에서 사용 예시를 확인할 수 있습니다:

1. `image_data/lena.jpg` 이미지를 불러옵니다.
2. `cvtColor`를 사용하여 그레이스케일로 변환합니다.
3. **3x3** 크기와 **5x5** 크기의 마스크로 각각 미디언 필터를 적용합니다.
4. 결과 이미지를 OpenCV 창으로 표시합니다.

마스크 크기가 커질수록 이미지가 더 부드러워지지만(블러 효과), 디테일이 손실될 수 있습니다.