# 소벨 필터 (Sobel Filter)

이 문서는 `sobel_filter.py` 파일에 구현된 **소벨 필터(Sobel Filter)** 알고리즘에 대해 설명합니다. 소벨 필터는 영상 처리에서 가장자리(Edge)를 검출하기 위해 사용되는 대표적인 미분 필터입니다.

## 개요

소벨 필터는 두 개의 3x3 커널을 사용하여 수평 방향과 수직 방향의 밝기 변화량(Gradient)을 계산합니다. 이를 통해 이미지 내의 엣지 강도와 방향을 찾아낼 수 있습니다.

## 주요 함수: `sobel_filter`

### `sobel_filter(image)`
- **목적**: 입력 이미지에서 엣지를 검출하여 그라디언트 크기(Magnitude)와 방향(Theta)을 반환합니다.
- **매개변수**:
  - `image`: 입력 그레이스케일 이미지.
- **반환값**:
  - `dst`: 엣지 강도 이미지 (0~255 범위).
  - `theta`: 엣지 방향 (라디안).

### 알고리즘 동작 원리

1. **커널 정의**:
   - `kernel_x`: 수직 방향의 엣지를 검출하기 위한 커널 (좌우 차이 계산).
     ```python
     [[-1, 0, 1],
      [-2, 0, 2],
      [-1, 0, 1]]
     ```
   - `kernel_y`: 수평 방향의 엣지를 검출하기 위한 커널 (상하 차이 계산).
     ```python
     [[ 1,  2,  1],
      [ 0,  0,  0],
      [-1, -2, -1]]
     ```

2. **컨볼루션 연산**:
   - `img_convolve` 함수를 사용하여 입력 이미지에 각각 `kernel_x`와 `kernel_y`를 적용합니다.
   - 결과로 x축 방향 미분값(`dst_x`)과 y축 방향 미분값(`dst_y`)을 얻습니다.

3. **정규화 (Normalization)**:
   - 계산된 미분값들을 0에서 255 사이의 값으로 스케일링합니다.

4. **그라디언트 크기 계산 (Magnitude)**:
   - x축과 y축 성분을 결합하여 전체 엣지의 강도를 계산합니다.
   - 수식: $G = \sqrt{G_x^2 + G_y^2}$
   - 결과값(`dst_xy`)을 다시 0~255 범위로 정규화하고 `uint8` 타입으로 변환합니다.

5. **방향 계산 (Direction)**:
   - `np.arctan2(dst_y, dst_x)`를 사용하여 엣지의 방향(`theta`)을 계산합니다.

## 사용법

`if __name__ == "__main__":` 블록에서 사용 예시를 확인할 수 있습니다:

1. `image_data/lena.jpg` 이미지를 불러옵니다.
2. `cvtColor`를 사용하여 그레이스케일로 변환합니다.
3. `sobel_filter` 함수를 호출하여 엣지 이미지와 방향 정보를 얻습니다.
4. 결과 이미지를 OpenCV 창으로 표시합니다.