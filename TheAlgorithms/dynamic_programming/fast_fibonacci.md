# 고속 피보나치 수열 계산 (Fast Fibonacci)

이 문서는 `fast_fibonacci.py` 파일에 구현된 **고속 피보나치 수열** 알고리즘에 대해 설명합니다. 이 알고리즘은 $O(\log n)$의 시간 복잡도를 가지며, 매우 큰 $n$에 대해서도 빠르게 피보나치 수를 계산할 수 있습니다.

## 개요

일반적인 반복문이나 재귀를 사용한 피보나치 계산은 $O(n)$ 시간이 걸리지만, 이 코드는 피보나치 수열의 행렬 거듭제곱 성질이나 배가 공식(Doubling Formula)을 사용하여 로그 시간 복잡도로 계산합니다.

## 주요 함수 설명

### `fibonacci(n: int) -> int`
- **목적**: $n$번째 피보나치 수 $F(n)$을 반환합니다.
- **매개변수**:
  - `n`: 계산할 피보나치 수의 인덱스 (0 이상의 정수).
- **예외 처리**: `n`이 음수일 경우 `ValueError`를 발생시킵니다.

### `_fib(n: int) -> tuple[int, int]`
- **목적**: 재귀적으로 $F(n)$과 $F(n+1)$을 계산하여 튜플로 반환합니다.
- **반환값**: `(F(n), F(n+1))`
- **알고리즘 원리**:
  - **기저 사례 (Base Case)**: $n=0$일 때 `(0, 1)`을 반환합니다. ($F(0)=0, F(1)=1$)
  - **재귀 단계**:
    - $n$을 2로 나눈 몫 $k$에 대해 `_fib(k)`를 호출하여 $a=F(k)$, $b=F(k+1)$을 얻습니다.
    - 다음 공식을 사용하여 $F(2k)$와 $F(2k+1)$을 계산합니다:
      - $c = F(2k) = a(2b - a)$
      - $d = F(2k+1) = a^2 + b^2$
    - 만약 $n$이 짝수라면 `(c, d)`를 반환합니다.
    - 만약 $n$이 홀수라면 `(d, c + d)`를 반환합니다. (여기서 $c+d = F(2k) + F(2k+1) = F(2k+2)$)

## 수학적 배경

이 알고리즘은 다음과 같은 피보나치 수열의 항등식을 기반으로 합니다:
- $F(2n) = F(n) \times (2F(n+1) - F(n))$
- $F(2n+1) = F(n+1)^2 + F(n)^2$

이 공식을 사용하면 $n$을 절반씩 줄여가며 재귀 호출을 할 수 있어, 계산 단계가 $n$의 비트 수에 비례하게 됩니다.

## 사용법

터미널에서 스크립트를 실행할 때 인자로 숫자를 전달하면 해당 피보나치 수를 출력합니다.

```bash
python fast_fibonacci.py 10
# 출력: fibonacci(10) is 55
```
