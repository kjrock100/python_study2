# `length_conversion.py` 코드 설명

이 문서는 `length_conversion.py` 파이썬 스크립트에 포함된 `length_conversion` 함수를 설명합니다. 이 스크립트는 미터, 킬로미터, 피트, 인치 등 다양한 길이 단위를 서로 변환하는 기능을 제공합니다.

## 목차
1.  스크립트의 역할 및 변환 원리
2.  주요 데이터 구조
    -   `TYPE_CONVERSION`
    -   `METRIC_CONVERSION`
3.  함수 설명
    -   `length_conversion(value, from_type, to_type)`
4.  실행 방법
5.  코드 개선 제안

## 스크립트의 역할 및 변환 원리

이 스크립트는 다양한 길이 단위를 입력받아 원하는 다른 단위로 변환하는 범용 변환기입니다.

변환은 **미터(meter)**를 공통의 기준 단위로 사용하여 2단계로 이루어집니다.
1.  입력된 단위(`from_type`)의 값을 미터로 변환합니다.
2.  미터로 변환된 값을 다시 목표 단위(`to_type`)로 변환합니다.

**공식**: `결과 = 입력값 * (입력단위 -> 미터 변환 계수) * (미터 -> 목표단위 변환 계수)`

## 주요 데이터 구조

### `TYPE_CONVERSION`

다양한 단위 표현(전체 이름, 약어, 복수형 등)을 표준 약어로 정규화하기 위한 딕셔너리입니다.

-   **역할**: 사용자가 "METER", "meter", "m" 등 다양한 형태로 단위를 입력해도 모두 "m"으로 인식하도록 돕습니다.

```python
{
    "meter": "m",
    "feet": "ft",
    "foot": "ft",
    ...
}
```

### `METRIC_CONVERSION`

각 표준 약어에 대한 변환 계수를 저장하는 딕셔너리입니다.

-   **구조**: `namedtuple`을 사용하여 각 단위에 대해 두 가지 계수를 저장합니다.
    -   `from_`: 해당 단위를 **미터로** 변환할 때 곱하는 계수.
    -   `to`: **미터에서** 해당 단위로 변환할 때 곱하는 계수.

## 함수 설명

### `length_conversion(value: float, from_type: str, to_type: str) -> float`

주어진 `value`를 `from_type`에서 `to_type`으로 변환합니다.

-   **알고리즘**:
    1.  **입력 정규화**: `from_type`과 `to_type` 문자열을 소문자로 바꾸고, 끝에 's'가 있으면 제거합니다. 그 후 `TYPE_CONVERSION` 딕셔너리를 참조하여 표준 약어로 변환합니다.
    2.  **유효성 검사**: 변환된 단위 약어가 `METRIC_CONVERSION`에 존재하는지 확인하고, 없으면 `ValueError`를 발생시킵니다.
    3.  **변환 수행**: 위에서 설명한 공식을 사용하여 최종 값을 계산하고 반환합니다.
        -   `value * METRIC_CONVERSION[new_from].from_ * METRIC_CONVERSION[new_to].to`

```python
>>> length_conversion(4, "METER", "FEET")
13.12336
>>> length_conversion(3, "kilometer", "mile")
1.8641130000000001
```

## 실행 방법

스크립트를 직접 실행하면 내장된 `doctest`를 통해 함수에 포함된 예제 코드가 실행되고, 함수의 정확성이 자동으로 테스트됩니다.

```bash
python length_conversion.py
```

별도의 출력이 없다면 모든 테스트가 성공적으로 통과한 것입니다.

## 코드 개선 제안

1.  **데이터 구조 통합**: 현재 `TYPE_CONVERSION`과 `METRIC_CONVERSION` 두 개의 딕셔너리로 단위 정보가 나뉘어 있습니다. 이를 하나의 딕셔너리로 통합하면 새로운 단위를 추가하거나 관리하기가 더 쉬워집니다. 예를 들어, 각 단위 객체가 변환 계수와 함께 별칭(alias) 리스트를 갖도록 설계할 수 있습니다.

2.  **사용자 인터페이스 추가**: `if __name__ == "__main__"` 블록에 `argparse` 모듈을 사용하여 사용자가 커맨드 라인에서 직접 값과 단위를 입력하여 변환을 수행할 수 있는 인터페이스를 제공하면 스크립트의 활용도가 높아집니다.

3.  **부동 소수점 정밀도**: `doctest` 예제에서 `1.8641130000000001`과 같이 부동 소수점 연산으로 인한 미세한 오차가 보입니다. 이는 정상적인 동작이지만, 만약 특정 소수점 자리까지의 결과가 필요하다면, 함수 마지막에 `round()`를 사용하여 반올림하는 옵션을 추가할 수 있습니다.