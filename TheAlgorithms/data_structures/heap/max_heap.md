# `max_heap.py` 코드 설명

이 문서는 `max_heap.py` 스크립트에 구현된 최대 힙(Max-Heap) 자료 구조에 대해 설명합니다.

## 1. 최대 힙(Max-Heap)이란?

힙은 완전 이진 트리(Complete Binary Tree)의 한 종류로, 특정 규칙을 만족하는 자료 구조입니다. 최대 힙은 다음과 같은 속성을 가집니다.

> **최대 힙 속성**: 모든 부모 노드의 값은 자신의 자식 노드의 값보다 크거나 같습니다.

이 속성으로 인해, 힙의 루트(root) 노드는 항상 힙 내에서 가장 큰 값을 가지게 됩니다. 이 구현은 리스트(list)를 사용하여 힙을 표현하며, 부모/자식 인덱스 계산을 용이하게 하기 위해 **1-기반 인덱싱(1-based indexing)**을 사용합니다. (리스트의 0번 인덱스는 더미 값으로 사용됩니다.)

## 2. 클래스 및 메서드 설명

### `BinaryHeap` 클래스

#### `__init__(self)`
-   **역할**: 힙을 초기화합니다.
-   **속성**:
    -   `__heap`: 실제 힙 원소들이 저장되는 리스트. `[0]`으로 시작하여 1-기반 인덱싱을 구현합니다.
    -   `__size`: 힙에 포함된 원소의 개수.

#### `insert(self, value: int)`
-   **역할**: 힙에 새로운 값을 삽입합니다.
-   **시간 복잡도**: O(log N)
-   **동작**:
    1.  값을 리스트의 맨 끝에 추가합니다.
    2.  힙의 크기를 1 증가시킵니다.
    3.  새로 추가된 원소를 부모와 비교하며 위로 올리는 `__swap_up`을 호출하여 힙 속성을 복원합니다.

#### `pop(self) -> int`
-   **역할**: 힙에서 최댓값(루트)을 제거하고 반환합니다.
-   **시간 복잡도**: O(log N)
-   **동작**:
    1.  루트 노드(최댓값)를 저장합니다.
    2.  힙의 마지막 원소를 루트 위치로 가져옵니다.
    3.  힙 크기를 1 줄이고, 리스트에서 마지막 원소를 제거합니다.
    4.  새로운 루트를 자식과 비교하며 아래로 내리는 `__swap_down`을 호출하여 힙 속성을 복원합니다.
    5.  저장해 둔 원래의 최댓값을 반환합니다.

### 내부 헬퍼 메서드

#### `__swap_up(self, i: int)`
-   **역할**: `i`번 인덱스의 원소를 부모 노드와 비교하여, 부모보다 클 경우 위치를 바꾸는 과정을 반복합니다.

#### `__swap_down(self, i: int)`
-   **역할**: `i`번 인덱스의 원소를 두 자식 노드와 비교하여, 자식보다 작을 경우 더 큰 자식과 위치를 바꾸는 과정을 반복합니다.

### 유틸리티

#### `get_list` (property)
-   **역할**: 힙에 저장된 실제 원소들의 리스트를 반환합니다. (더미 값 제외)

#### `__len__(self)`
-   **역할**: 힙의 현재 크기(`__size`)를 반환하여 `len(binary_heap)` 구문을 지원합니다.

## 3. 사용 예제

`doctest`와 `if __name__ == "__main__"` 블록에 사용 예제가 포함되어 있습니다.

```python
binary_heap = BinaryHeap()
binary_heap.insert(6)
binary_heap.insert(10)
binary_heap.insert(15)
binary_heap.insert(12)

# 최댓값 추출
print(binary_heap.pop())  # 출력: 15
print(binary_heap.pop())  # 출력: 12

# 현재 힙 상태 확인
print(binary_heap.get_list)  # 출력: [10, 6]
print(len(binary_heap))      # 출력: 2
```

## 4. 테스트

스크립트에는 `doctest`가 포함되어 있어 코드의 정확성을 검증할 수 있습니다. 터미널에서 다음 명령어를 실행하여 테스트를 진행할 수 있습니다.

```bash
python -m doctest /home/kjrock/work2/study/kjrock100/python_study2/TheAlgorithms/data_structures/heap/max_heap.py
```