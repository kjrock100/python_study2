# `dijkstras_two_stack_algorithm.py` 코드 설명

이 문서는 `dijkstras_two_stack_algorithm.py` 스크립트에 구현된, 다익스트라의 두 스택 알고리즘(Dijkstra's Two-Stack Algorithm)에 대해 설명합니다.

## 1. 다익스트라의 두 스택 알고리즘이란?

다익스트라의 두 스택 알고리즘은 괄호로 완전히 둘러싸인 중위 표기법(infix notation) 수식을 계산하는 고전적인 방법입니다. 이름에서 알 수 있듯이, 이 알고리즘은 '피연산자 스택(operand stack)'과 '연산자 스택(operator stack)'이라는 두 개의 스택을 사용하여 수식을 평가합니다.

예를 들어, `(5 + ((4 * 2) * (2 + 3)))`와 같은 수식을 계산할 수 있습니다.

## 2. 알고리즘 규칙

이 알고리즘은 다음과 같은 간단한 규칙에 따라 동작합니다.

1.  **피연산자(숫자)**: 피연산자를 만나면 **피연산자 스택**에 `push`합니다.
2.  **연산자**: 연산자(`+`, `-`, `*`, `/`)를 만나면 **연산자 스택**에 `push`합니다.
3.  **여는 괄호 `(`**: 무시합니다.
4.  **닫는 괄호 `)`**:
    -   **연산자 스택**에서 연산자를 하나 `pop`합니다.
    -   **피연산자 스택**에서 피연산자를 두 개 `pop`합니다.
    -   `pop`한 연산자와 두 피연산자로 연산을 수행합니다.
    -   연산 결과를 다시 **피연산자 스택**에 `push`합니다.
5.  **종료**: 수식 전체를 처리한 후, **피연산자 스택**에 마지막으로 남아있는 값이 최종 결과입니다.

## 3. 함수 설명

### `dijkstras_two_stack_algorithm(equation: str) -> int`

-   **역할**: 주어진 수식 문자열 `equation`을 다익스트라의 두 스택 알고리즘을 사용하여 계산하고, 그 결과를 정수로 반환합니다.
-   **매개변수**:
    -   `equation`: 괄호로 완전히 둘러싸인 중위 표기법 수식 문자열.
-   **시간 복잡도**: O(N), 여기서 N은 문자열의 길이입니다. 문자열을 한 번만 순회합니다.
-   **공간 복잡도**: O(N), 최악의 경우 두 스택에 대부분의 문자를 저장해야 할 수 있습니다.

### 동작 과정

1.  `operators` 딕셔너리를 생성하여 문자열 연산자(`*`, `/`, `+`, `-`)를 실제 파이썬 `operator` 모듈의 함수(`op.mul`, `op.truediv` 등)와 매핑합니다.
2.  `operand_stack`과 `operator_stack`이라는 두 개의 빈 스택을 생성합니다.
3.  입력받은 `equation` 문자열을 한 글자씩 순회합니다.
    -   문자가 숫자(`isdigit()`)이면, 정수로 변환하여 `operand_stack`에 `push`합니다. (규칙 1)
    -   문자가 `operators` 딕셔너리에 있는 연산자이면, `operator_stack`에 `push`합니다. (규칙 2)
    -   문자가 닫는 괄호 `)`이면, 연산을 수행합니다. (규칙 4)
        -   `operator_stack`에서 연산자를 `pop`합니다.
        -   `operand_stack`에서 피연산자 두 개를 `pop`합니다. (스택의 LIFO 특성상, `num1`이 두 번째 피연산자, `num2`가 첫 번째 피연산자가 됩니다.)
        -   `operatorsopr` 형태로 연산을 수행하고, 결과를 다시 `operand_stack`에 `push`합니다.
4.  문자열 순회가 끝나면, `operand_stack`에 남아있는 최종 값을 `peek()`하여 반환합니다. (규칙 5)

## 4. 구현의 한계점

-   **한 자리 숫자**: 현재 구현은 `i.isdigit()`를 사용하므로, "10", "25"와 같은 두 자리 이상의 숫자를 처리할 수 없습니다.
-   **완전한 괄호 필요**: 이 알고리즘은 연산의 순서가 괄호에 의해 명확하게 정의되어 있다고 가정합니다. `5 + 4 * 2`와 같이 연산자 우선순위를 고려해야 하는 수식은 올바르게 계산할 수 없습니다.
-   **공백 처리**: 수식에 포함된 공백 문자를 처리하는 로직이 없습니다. `(5 + 3)`과 같은 입력은 정상적으로 동작하지 않습니다.

## 5. 사용 예제

```python
if __name__ == "__main__":
    # 이 예제는 현재 구현의 한계(한 자리 숫자, 공백 없음)를 보여줍니다.
    # 올바른 계산을 위해서는 "(5+((4*2)*(2+3)))"와 같이 공백이 없어야 합니다.
    equation = "(5 + ((4 * 2) * (2 + 3)))"
    equation_without_spaces = "".join(equation.split())

    # answer = 45
    result = dijkstras_two_stack_algorithm(equation_without_spaces)
    print(f"{equation} = {result}")
    # 출력: (5 + ((4 * 2) * (2 + 3))) = 45.0
```

## 6. 테스트 실행

파일에 포함된 `doctest`를 실행하여 코드의 정확성을 검증할 수 있습니다. 터미널에서 다음 명령어를 실행하세요.

```bash
python -m doctest /home/kjrock/work2/study/kjrock100/python_study2/TheAlgorithms/data_structures/stacks/dijkstras_two_stack_algorithm.py
```

테스트가 모두 통과하면 아무런 출력도 나타나지 않습니다.