# `prefix_evaluation.py` 코드 설명

이 문서는 `prefix_evaluation.py` 스크립트에 구현된, 전위 표기법(Prefix Notation)으로 작성된 수식을 계산하는 알고리즘에 대해 설명합니다.

## 1. 전위 표기법(Prefix Notation)이란?

전위 표기법은 연산자를 피연산자 앞에 쓰는 표기 방식입니다. 폴란드 표기법(Polish Notation)이라고도 불립니다.

-   **중위 표기법 (Infix)**: `9 + 6`
-   **전위 표기법 (Prefix)**: `+ 9 6`

전위 표기법은 후위 표기법(Postfix)과 마찬가지로 괄호나 연산자 우선순위 규칙 없이도 수식을 계산할 수 있다는 장점이 있습니다.

## 2. 핵심 알고리즘: 스택(Stack) 활용

이 코드는 **스택(Stack)** 자료 구조를 사용하여 전위 표기법 수식을 계산합니다.

**동작 원리:**
1.  빈 스택을 생성합니다.
2.  입력된 전위 표기법 문자열을 **오른쪽에서 왼쪽으로 (역순으로)** 순회합니다.
3.  **토큰이 피연산자(숫자)이면**: 스택에 `push`합니다.
4.  **토큰이 연산자(+, -, *, /)이면**:
    -   스택에서 피연산자 두 개를 `pop`합니다. (역순으로 순회하므로, 먼저 `pop`된 것이 첫 번째 피연산자, 나중에 `pop`된 것이 두 번째 피연산자가 됩니다.)
    -   두 피연산자에 대해 해당 연산을 수행합니다.
    -   연산 결과를 다시 스택에 `push`합니다.
5.  문자열 순회가 끝나면, 스택에 마지막으로 남아있는 하나의 값이 최종 결과입니다.

## 3. 함수 설명

### `is_operand(c: str) -> bool`

-   **역할**: 주어진 문자 `c`가 피연산자(숫자)인지 확인합니다.

### `evaluate(expression: str)`

-   **역할**: 전위 표기법으로 표현된 문자열 `expression`을 계산하고, 그 결과를 반환합니다.
-   **매개변수**:
    -   `expression`: 공백으로 구분된 전위 표기법 수식 문자열.
-   **시간 복잡도**: O(N), 여기서 N은 토큰의 개수입니다. 문자열을 한 번만 순회합니다.
-   **공간 복잡도**: O(N), 최악의 경우 모든 피연산자가 스택에 저장될 수 있습니다.
-   **구현상의 주의점**:
    -   `calcc` 부분에서 `o1`은 첫 번째로 pop된 피연산자, `o2`는 두 번째로 pop된 피연산자입니다. 수식을 역순으로 처리했기 때문에, `o1`이 원래 수식의 첫 번째 피연산자, `o2`가 두 번째 피연산자에 해당합니다. 따라서 `o1 - o2` 또는 `o1 / o2`와 같이 연산 순서가 중요한 경우, 이 로직은 올바르게 동작합니다.

## 4. 사용 예제

`doctest`와 `if __name__ == "__main__"` 블록에 사용 예제가 포함되어 있습니다.

**예제: `+ 9 * 2 6`**
1.  입력 문자열을 공백으로 분리하고 뒤집음: `['6', '2', '*', '9', '+']`
2.  `6` push -> stack: `[6]`
3.  `2` push -> stack: `[6, 2]`
4.  `*` 만남:
    -   `o1 = pop()` -> 2
    -   `o2 = pop()` -> 6
    -   `2 * 6 = 12` 계산 후 push -> stack: `[12]`
5.  `9` push -> stack: `[12, 9]`
6.  `+` 만남:
    -   `o1 = pop()` -> 9
    -   `o2 = pop()` -> 12
    -   `9 + 12 = 21` 계산 후 push -> stack: `[21]`
7.  순회 종료. 스택에서 `pop`하여 최종 결과 `21` 반환.

```python
>>> evaluate("+ 9 * 2 6")
21
>>> evaluate("/ * 10 2 + 4 1 ")
4.0
```

## 5. 테스트 실행

파일에 포함된 `doctest`를 실행하여 코드의 정확성을 검증할 수 있습니다. 터미널에서 다음 명령어를 실행하세요.

```bash
python -m doctest /home/kjrock/work2/study/kjrock100/python_study2/TheAlgorithms/data_structures/stacks/prefix_evaluation.py
```

테스트가 모두 통과하면 아무런 출력도 나타나지 않습니다.